package org.schema.game.client.controller.tutorial.states;

import org.schema.game.client.controller.manager.ingame.PlayerGameControlManager;
import org.schema.game.client.data.GameClientState;
import org.schema.schine.ai.AiEntityStateInterface;

public class InventoryOpenTestState extends SatisfyingCondition {

	/**
	 *
	 */
	

	public InventoryOpenTestState(AiEntityStateInterface gObj, String message, GameClientState state) {
		super(gObj, message, state);
		skipIfSatisfiedAtEnter = true;
	}

	@Override
	protected boolean checkSatisfyingCondition() {
		return getGameState().getGlobalGameControlManager().getIngameControlManager()
				.getPlayerGameControlManager().getInventoryControlManager().isActive();
	}

	/* (non-Javadoc)
	 * @see org.schema.game.client.controller.tutorial.states.SatisfyingCondition#onEnter()
	 */
	@Override
	public boolean onEnter() {
		PlayerGameControlManager playerGameControlManager = getGameState().getGlobalGameControlManager().getIngameControlManager().getPlayerGameControlManager();
		boolean inventoryActive = playerGameControlManager.getInventoryControlManager().isActive();
		if (inventoryActive) {
			playerGameControlManager.getInventoryControlManager().setActive(false);
			playerGameControlManager.getPlayerIntercationManager().setActive(true);
		}
		return super.onEnter();
	}

}
